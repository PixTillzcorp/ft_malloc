/*******************************************************************************
**____________________________________________________________________________**
**_____/\/\/\/\/\___/\/\____________/\/\/\/\/\/\_/\/\__/\/\__/\/\_____________**
**____/\/\____/\/\_______/\/\__/\/\____/\/\___________/\/\__/\/\__/\/\/\/\/\__**
**___/\/\/\/\/\___/\/\____/\/\/\______/\/\_____/\/\__/\/\__/\/\______/\/\_____**
**__/\/\_________/\/\____/\/\/\______/\/\_____/\/\__/\/\__/\/\____/\/\________**
**_/\/\_________/\/\__/\/\__/\/\____/\/\_____/\/\__/\/\__/\/\__/\/\/\/\/\_____**
**____________________________________________________________________________**
**                                                                            **
**----- Date ----------------{ 2019-11-21 01:19:09 }--------------------------**
**----- Author --------------{ PixTillz }-------------------------------------**
**----- Last Modified by ----{ hippolyteeinfalt }-----------------------------**
**----- Last Modified time --{ 2019-11-21 01:20:52 }--------------------------**
*******************************************************************************/

#include "../includes/malloc.h"

static void	*calloc_core(size_t count, size_t size)
{
	void	*ptr;
	size_t	len;

	if (!count || !size)
		return (NULL);
	len = count * size;
	if (!(ptr = malloc_core(len)))
	{
		ft_putendl("Malloc call in calloc failed.");
		return (NULL);
	}
	ft_bzero(ptr, len);
	return (ptr);
}

void		*calloc(size_t count, size_t size)
{
	void	*ret;

	pthread_mutex_lock(&g_mutex);
	ret = calloc_core(count, size);
	pthread_mutex_unlock(&g_mutex);
	return (ret);
}
